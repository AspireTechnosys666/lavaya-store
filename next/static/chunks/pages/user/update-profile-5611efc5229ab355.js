(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{7583:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/update-profile",function(){return l(3336)}])},3336:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return Z}});var a=l(7168),d=l(608),i=l(880),r=l(30),t=l.n(r),n=l(5166),o=l(6250),m=l(8381),c=l(7098),u=l(1424),p=l(2324),x=l(1305),h=l(4997),v=l(9210),f=l(6185),g=l.n(f),j=l(3844),b=l(7957),image_uploader_Uploader=e=>{let{setImageUrl:s,imageUrl:l}=e,[d,i]=(0,m.useState)([]),{getRootProps:r,getInputProps:t}=(0,j.uI)({accept:"image/*",multiple:!1,maxSize:1e5,onDrop:e=>{i(e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))}}),n=d.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:(0,a.jsx)("img",{className:"inline-flex border-2 border-gray-100 w-24 max-h-24",src:e.preview,alt:e.name})})},e.name));return(0,m.useEffect)(()=>{d&&d.forEach(e=>{let l=new FormData;l.append("file",e),l.append("upload_preset","ekote6fk"),g()({url:"https://api.cloudinary.com/v1_1/dwujlnajx/image/upload",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:l}).then(e=>{s(e.data.secure_url)}).catch(e=>console.log(e))})},[d]),(0,m.useEffect)(()=>()=>{d.forEach(e=>URL.revokeObjectURL(e.preview))},[d]),(0,a.jsxs)("div",{className:"w-full text-center",children:[(0,a.jsxs)("div",{className:"px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer",...r(),children:[(0,a.jsx)("input",{...t()}),(0,a.jsx)("span",{className:"mx-auto flex justify-center",children:(0,a.jsx)(b.Re4,{className:"text-3xl text-emerald-500"})}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Drag your image here"}),(0,a.jsx)("em",{className:"text-xs text-gray-400",children:"(Only *.jpeg and *.png images will be accepted)"})]}),(0,a.jsx)("aside",{className:"flex flex-row flex-wrap mt-4",children:l?(0,a.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 w-24 max-h-24 p-2",src:l,alt:"product"}):n})]})},N=l(3463),w=l(6286),_=l(2182);let UpdateProfile=()=>{var e,s,l,d,i,r,t,f,g,j,b;let[y,Z]=(0,m.useState)(""),[S,U]=(0,m.useState)(!1),{state:{userInfo:E}}=(0,m.useContext)(v.S),{storeCustomizationSetting:P}=(0,w.Z)(),{showingTranslateValue:O}=(0,_.Z)(),{register:k,handleSubmit:I,setValue:L,formState:{errors:C}}=(0,o.cI)();return(0,m.useEffect)(()=>{if(n.Z.get("userInfo")){let e=JSON.parse(n.Z.get("userInfo"));L("name",e.name),L("email",e.email),L("address",e.address),L("phone",e.phone),Z(e.image)}},[]),(0,a.jsx)(p.default,{title:O(null==P?void 0:null===(e=P.dashboard)||void 0===e?void 0:e.update_profile),description:"This is edit profile page",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl",children:[(0,a.jsx)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"px-4 sm:px-0",children:(0,a.jsx)("h2",{className:"text-xl font-serif font-semibold mb-5",children:O(null==P?void 0:null===(s=P.dashboard)||void 0===s?void 0:s.update_profile)})})})}),(0,a.jsx)("form",{onSubmit:I(e=>{U(!0);let s={name:e.name,email:e.email,address:e.address,phone:e.phone,image:y};h.Z.updateCustomer(E._id,s).then(e=>{e&&(U(!1),(0,N.t5)("Profile Update Successfully!"),n.Z.set("userInfo",JSON.stringify(e)),window.location.reload())}).catch(e=>{var s,l;U(!1),(0,N.cB)((null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||(null==e?void 0:e.message))})}),children:(0,a.jsxs)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:[(0,a.jsx)("div",{className:"bg-white space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Z,{label:"Photo"}),(0,a.jsx)("div",{className:"mt-1 flex items-center",children:(0,a.jsx)(image_uploader_Uploader,{imageUrl:y,setImageUrl:Z})})]})}),(0,a.jsx)("div",{className:"mt-10 sm:mt-0",children:(0,a.jsx)("div",{className:"md:grid-cols-6 md:gap-6",children:(0,a.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:(0,a.jsxs)("div",{className:"lg:mt-6 mt-4 bg-white",children:[(0,a.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(x.Z,{register:k,label:O(null==P?void 0:null===(l=P.dashboard)||void 0===l?void 0:l.full_name),name:"name",type:"text",placeholder:O(null==P?void 0:null===(d=P.dashboard)||void 0===d?void 0:d.full_name)}),(0,a.jsx)(u.Z,{errorName:C.name})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(x.Z,{register:k,label:O(null==P?void 0:null===(i=P.dashboard)||void 0===i?void 0:i.address),name:"address",type:"text",placeholder:O(null==P?void 0:null===(r=P.dashboard)||void 0===r?void 0:r.address)}),(0,a.jsx)(u.Z,{errorName:C.address})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(x.Z,{register:k,label:O(null==P?void 0:null===(t=P.dashboard)||void 0===t?void 0:t.user_phone),name:"phone",type:"tel",placeholder:O(null==P?void 0:null===(f=P.dashboard)||void 0===f?void 0:f.user_phone)}),(0,a.jsx)(u.Z,{errorName:C.phone})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(x.Z,{register:k,label:O(null==P?void 0:null===(g=P.dashboard)||void 0===g?void 0:g.user_email),name:"email",type:"email",placeholder:O(null==P?void 0:null===(j=P.dashboard)||void 0===j?void 0:j.user_email)}),(0,a.jsx)(u.Z,{errorName:C.email})]})]}),(0,a.jsx)("div",{className:"col-span-6 sm:col-span-3 mt-5 text-right",children:S?(0,a.jsxs)("button",{disabled:S,type:"submit",className:"md:text-sm leading-5 inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-medium text-center justify-center border-0 border-transparent rounded-md placeholder-white focus-visible:outline-none focus:outline-none bg-emerald-500 text-white px-5 md:px-6 lg:px-8 py-2 md:py-3 lg:py-3 hover:text-white hover:bg-emerald-600 h-12 mt-1 text-sm lg:text-sm w-full sm:w-auto",children:[(0,a.jsx)("img",{src:"/loader/spinner.gif",alt:"Loading",width:20,height:10}),(0,a.jsx)("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):(0,a.jsx)("button",{disabled:S,type:"submit",className:"md:text-sm leading-5 inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-medium text-center justify-center border-0 border-transparent rounded-md placeholder-white focus-visible:outline-none focus:outline-none bg-emerald-500 text-white px-5 md:px-6 lg:px-8 py-2 md:py-3 lg:py-3 hover:text-white hover:bg-emerald-600 h-12 mt-1 text-sm lg:text-sm w-full sm:w-auto",children:O(null==P?void 0:null===(b=P.dashboard)||void 0===b?void 0:b.update_button)})})]})})})})]})})]})})},y=t()(()=>Promise.resolve(UpdateProfile),{ssr:!1});var Z=(0,i.Z)(y,{...d,isLoader:!0,skipInitialProps:!1,loadLocaleFrom:(e,s)=>l(242)("./".concat(e,"/").concat(s)).then(e=>e.default)})}},function(e){e.O(0,[260,609,519,351,929,679,264,921,769,324,774,888,179],function(){return e(e.s=7583)}),_N_E=e.O()}]);